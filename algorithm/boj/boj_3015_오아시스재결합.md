# boj 3015 오아시스 재결합

- 골드1 문제.. 스스로 못풀어서 답안까지 봤는데도 한참을 이해 못했다.
- 다른 stack 문제와 다르게 이전에 스택에 있었던 원소들과 쌍이었던 것을 기록해줘서 더해줘야하는데 이걸 생각하지 못했다.



## 코드

```c++
#include <bits/stdc++.h>

using namespace std;

#define endl '\n'
#define ll long long

int main()
{
	ios::sync_with_stdio(0);
	cin.tie(0);

	int n;
	cin >> n;
	stack<pair<int, int>> s; // first는 키, second는 나와 쌍이었던 애들 수 
	ll result = 0;

	// 2 2 5 1
	// 2, 1 result = 0;
	// 2, 2 result = 1;
	// 5, 1 result = 3;
	// 

	while (n--)
	{
		int now;
		cin >> now;
		int cnt = 1;
		while (!s.empty() && s.top().first <= now)
		{
			result += s.top().second; // 나보다 작거나 같은 놈이랑 쌍이었던 애들은 now도 쌍이 될 수 있음
			if (s.top().first == now)
			{
				cnt += s.top().second;
			}
			s.pop();
		}
		if (!s.empty())
		{
			result++;  // s.top()이 now보다 크기 때문에 쌍이 하나 늘어남
		}
		s.push({ now, cnt });
	}

	cout << result;

	return 0;
}
```

