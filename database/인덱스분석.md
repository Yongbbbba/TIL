```mssql
-- 튜닝의 시작
-- 인덱스 분석

-- 서비스의 규모가 커진다면 SQL 성능을 개선해아할 필요성이 커지게되고, 이를 위해 성능 분석이 필연적이다. 

-- 성능 분석



-- DB 정보 살펴보기

EXEC sp_helpdb 'Northwind';



-- 임시 테이블 만들자 (인덱스 테스트용)

CREATE TABLE Test

(

 EmployeeID INT NOT NULL,

 LastName NVARCHAR(20) NULL,

 FirstName NVARCHAR(20) NULL, 

 HireDate DATETIME NULL

);

GO



INSERT INTO Test

SELECT EmployeeID,LastName,FirstName, HireDate

FROM Employees;



SELECT *

FROM Test;



-- FILLFACTOR(리프 페이지 공간 1%만 사용)

-- 예제 데이터의 크기가 작기 때문에 인덱스를 트리구조로 만들지 않을 수 있어서 강제로 만들기 위하여 설정.

--  PAD_INDEX(FILLFACTOR 중간 페이지 적용) 

CREATE INDEX Test_Index ON Test(Lastname)

WITH (FILLFACTOR = 1, PAD_INDEX = ON)

GO



--  인덱스 번호 찾기 

SELECT index_id, name

FROM sys.indexes

WHERE object_id = object_id('Test');



-- 2번 인덱스 정보 살펴보기

-- IndexLevel을 살펴보면 트리구조라는 것을 알 수 있음

-- Root(2) -> Branch(1) -> Leaf(0)

DBCC IND('Northwind', 'Test', 2);



DBCC PAGE('Northwind', 1/*파일번호*/, 840/*페이지번호*/, 3/*출력옵션*/);



-- Random Access (한 건 읽기 위해 한 페이지씩 접근)

-- Bookmark Lookup (RID를 통해 행을 찾는다)


```

